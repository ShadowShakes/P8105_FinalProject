<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Analysis_Victim.knit</title>

<script src="site_libs/header-attrs-2.16/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="Data_Preprocessing.html">Data &amp; Processing</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Data-driven Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Analysis_Suspect.html">Suspect Analysis</a>
    </li>
    <li>
      <a href="Analysis_Victim.html">Victim Analysis</a>
    </li>
    <li>
      <a href="Analysis_Region.html">Region Analysis</a>
    </li>
    <li>
      <a href="Analysis_Time.html">Time Range Analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Shiny App
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Shiny_Notification.html">Shiny App Notification</a>
    </li>
    <li>
      <a href="https://shadowshakes.shinyapps.io/app_before_covid/">Shiny Map Before Covid</a>
    </li>
    <li>
      <a href="https://shadowshakes.shinyapps.io/app_after_covid/">Shiny Map After Covid</a>
    </li>
    <li>
      <a href="https://shadowshakes.shinyapps.io/app_detect_safety/">Shiny Safety Assessment</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    CUMC Safety Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Analysis_CUMC.html">Visual Analysis</a>
    </li>
    <li>
      <a href="https://shadowshakes.shinyapps.io/app_cumc/">CUMC Safety Map</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="Project_Report.html">Conclusion &amp; Report</a>
</li>
<li>
  <a href="https://www.youtube.com/">Screencast</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="mailto:&lt;sc5154@cumc.columiba.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/ShadowShakes/P8105_Final_Project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">




</div>


<p>（）“— title:”Victim Analysis” output: html_document: toc: true
toc_float: true code_folding: hide —</p>
<center>
<img src="Images/victim_1.jpeg" style="width:100%">
</center>
 
<p>Our dataset does not contain data for October, November and December
of the year 2022. We are interested in the following main felonies:
Burglary, Felony Assault, Grand Larceny, Grand Larceny of Motor Vehicle,
Murder and Non-negligent Manslaughter, Rape, and Robbery.</p>
<div
id="lets-define-the-dangerous-level-related-to-average-daily-criminal-events"
class="section level1">
<h1>let’s define the dangerous level related to average daily criminal
events</h1>
<pre class="r"><code>dangrous_data=complaint %&gt;% 
  select(-day_of_week) %&gt;% 
  dplyr::filter(!is.na(vic_race)) %&gt;% 
  dplyr::filter(!is.na(level)) %&gt;% 
  dplyr::filter(!is.na(vic_age_group)) %&gt;% 
  dplyr::filter(!is.na(vic_sex))
  

dangrous_data = dangrous_data%&gt;% 
  mutate(
   level_lm= case_when(
     level == &#39;VIOLATION&#39; ~ 0,
     level == &quot;MISDEMEANOR&quot; ~ 1,
     level == &quot;FELONY&quot; ~ 2
   )
  )</code></pre>
<p>From the data, we can easily find that violation represents the
lowest level, followed by misdemeanors and felonies. Therefore, they are
assigned 0, 1, and 2 to represent the degree of danger of the event,
that is, the risk factor faced by the victim.</p>
</div>
<div
id="next-lets-further-analyze-the-relationship-between-the-characteristics-of-the-victim-and-the-level-of-danger."
class="section level1">
<h1>Next, let’s further analyze the relationship between the
characteristics of the victim and the level of danger.</h1>
<div id="the-first-is-the-gender-of-the-victim" class="section level2">
<h2>The first is the gender of the victim</h2>
<div
id="first-by-drawing-a-stacked-bar-graph-we-will-observe-whether-there-are-differences-in-the-historical-total-amount-of-dangerous-incidents-encountered-by-victims-of-different-genders."
class="section level3">
<h3>First, by drawing a stacked bar graph, we will observe whether there
are differences in the historical total amount of dangerous incidents
encountered by victims of different genders.</h3>
<pre class="r"><code>plot_his_sex=dangrous_data %&gt;% 
  group_by(level,vic_sex) %&gt;% 
  dplyr::summarize(
    n_obs=n(),
    type=level_lm
  ) %&gt;% 
  unique() %&gt;% 
  ggplot(
    aes(x=level,y=n_obs,fill=vic_sex)
  )+
  geom_bar(stat=&quot;identity&quot;)+
  labs(
    title=&quot;relationship between dangerous and victim sex&quot;,
    x=&quot;dangerous level&quot;,
    y=&quot;number of cases&quot;
  )
plot_his_sex</code></pre>
<p><img src="Analysis_Victim_files/figure-html/unnamed-chunk-2-1.png" width="80%" /></p>
<p>Through the stacked bar chart, we can see that when the danger level
is violation (0), the number of incidents where the victim is a woman is
much higher than that of a man. At intermediate and higher levels, no
significant differences can be observed by observation,</p>
</div>
<div
id="first-by-drawing-a-stacked-bar-graph-we-will-observe-whether-there-are-differences-in-the-historical-total-amount-of-dangerous-incidents-encountered-by-victims-of-different-genders.-1"
class="section level3">
<h3>First, by drawing a stacked bar graph, we will observe whether there
are differences in the historical total amount of dangerous incidents
encountered by victims of different genders.</h3>
<pre class="r"><code>plot_pie_sex0=dangrous_data %&gt;%
  group_by(level,vic_sex) %&gt;% 
  dplyr::summarize(
    n_obs=n(),
    type=level_lm
  ) %&gt;% 
  unique() %&gt;%
  filter(type==0)

plot_pie_sex0=plot_ly(plot_pie_sex0,labels =~ vic_sex,values= ~n_obs) %&gt;% 
  add_pie %&gt;% 
  layout(title=&quot;VIOLATION for vic_sex&quot;)

plot_pie_sex1=dangrous_data %&gt;%
  group_by(level,vic_sex) %&gt;% 
  dplyr::summarize(
    n_obs=n(),
    type=level_lm
  ) %&gt;% 
  unique() %&gt;%
  filter(type==1)
plot_pie_sex1=plot_ly(plot_pie_sex1,labels =~ vic_sex,values= ~n_obs) %&gt;% 
  add_pie %&gt;% 
  layout(title=&quot;MISDEMEANOR for vic_sex&quot;)

plot_pie_sex2=dangrous_data %&gt;%
  group_by(level,vic_sex) %&gt;% 
  dplyr::summarize(
    n_obs=n(),
    type=level_lm
  ) %&gt;% 
  unique() %&gt;%
  filter(type==2)

plot_pie_sex2=plot_ly(plot_pie_sex2,labels =~ vic_sex,values= ~n_obs) %&gt;% 
  add_pie %&gt;% 
  layout(title=&quot;FELONY for vic_sex&quot;)


par(mfrow=c(1,3))
plot_pie_sex0</code></pre>
<div id="htmlwidget-04eaf03d0aa14eb56e6f" style="width:80%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-04eaf03d0aa14eb56e6f">{"x":{"visdat":{"284017027f2c":["function () ","plotlyVisDat"]},"cur_data":"284017027f2c","attrs":{"284017027f2c":{"labels":{},"values":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"VIOLATION for vic_sex","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["F","M"],"values":[284922,157163],"type":"pie","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>plot_pie_sex1</code></pre>
<div id="htmlwidget-11f37e02d3abea44e919" style="width:80%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-11f37e02d3abea44e919">{"x":{"visdat":{"284024eb2d81":["function () ","plotlyVisDat"]},"cur_data":"284024eb2d81","attrs":{"284024eb2d81":{"labels":{},"values":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"MISDEMEANOR for vic_sex","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["F","M"],"values":[536728,488121],"type":"pie","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div
id="further-we-use-the-logistic-regression-model-to-observe-whether-this-difference-is-statistically-significant-when-we-predict-the-risk-of-events."
class="section level3">
<h3>Further, we use the logistic regression model to observe whether
this difference is statistically significant when we predict the risk of
events.</h3>
<p>In order to simplify the model and facilitate effective verification,
we classify felony and misdemeanors with no obvious difference into one
category - high risk, regard violation as low risk, and assign ordinal
variables 1, 0 respectively.</p>
<pre class="r"><code>#manipulate a logistic regression about level~vic

dangrous_data = dangrous_data %&gt;% 
  mutate(
   level_lm= case_when(
     level == &#39;VIOLATION&#39; ~ 0,
     level == &quot;MISDEMEANOR&quot; ~ 0,
     level == &quot;FELONY&quot; ~ 1
   )
  ) %&gt;% 
  mutate(
    level_lm=ordered(level_lm, labels = c(&#39;0&#39;, &#39;1&#39;))
    )

model_virsex &lt;- glm(level_lm ~ vic_sex ,family = binomial, data = dangrous_data)
summary(model_virsex)</code></pre>
<pre><code>## 
## Call:
## glm(formula = level_lm ~ vic_sex, family = binomial, data = dangrous_data)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -0.9389  -0.9389  -0.8174   1.4364   1.5867  
## 
## Coefficients:
##              Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -0.924672   0.002070  -446.7   &lt;2e-16 ***
## vic_sexM     0.333812   0.002938   113.6   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 2688603  on 2150241  degrees of freedom
## Residual deviance: 2675668  on 2150240  degrees of freedom
## AIC: 2675672
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<p>By observing the results, the regression coefficient of the
independent variable is positive, and the significance level is less
than 0.05. It is not difficult to see that the gender difference has a
significant significance for judging the event level. That is, women are
more likely to be persecuted in VIOLATION-level events. In the event
types with higher risk levels, the probability of men and women being in
danger will tend to be equal.</p>
</div>
</div>
<div
id="we-will-use-the-same-line-of-thought-to-analyze-the-relationship-between-the-race-of-the-victim-and-the-level-of-danger."
class="section level2">
<h2>We will use the same line of thought to analyze the relationship
between the race of the victim and the level of danger.</h2>
<pre class="r"><code>dangrous_data = dangrous_data %&gt;% 
  mutate(
   level_lm= case_when(
     level == &#39;VIOLATION&#39; ~ 0,
     level == &quot;MISDEMEANOR&quot; ~ 1,
     level == &quot;FELONY&quot; ~ 2
   )
  )

plot_bar_agegroup=dangrous_data %&gt;% 
  group_by(level,vic_age_group) %&gt;% 
  dplyr::summarize(
    n_obs=n(),
    type=level
  ) %&gt;% 
  unique() %&gt;% 
  ggplot(
    aes(x=level,y=n_obs,fill=vic_age_group)
  )+
  geom_bar(stat=&quot;identity&quot;)+
  labs(
    title = &quot;relationship between dangerous level and victim age range&quot;,
    x = &quot;dangerous level&quot;,
    y = &quot;number of cases&quot;
  )
plot_bar_agegroup</code></pre>
<p><img src="Analysis_Victim_files/figure-html/unnamed-chunk-5-1.png" width="80%" /></p>
<pre class="r"><code>plot_pie_age0 = dangrous_data %&gt;%
  group_by(level,vic_age_group) %&gt;% 
  dplyr::summarize(
    n_obs=n(),
    type=level_lm
  ) %&gt;% 
  unique() %&gt;%
  filter(type==0)

plot_pie_age0=plot_ly(plot_pie_age0,labels =~ vic_age_group,values= ~n_obs) %&gt;% 
  add_pie %&gt;% 
  layout(title=&quot;VIOLATION for vic_age&quot;)

plot_pie_age1=dangrous_data %&gt;%
  group_by(level,vic_age_group) %&gt;% 
  dplyr::summarize(
    n_obs=n(),
    type=level_lm
  ) %&gt;% 
  unique() %&gt;%
  filter(type==1)
plot_pie_age1=plot_ly(plot_pie_age1,labels =~ vic_age_group,values= ~n_obs) %&gt;% 
  add_pie %&gt;% 
  layout(title=&quot;MISDEMEANOR for vic_age&quot;)

plot_pie_age2=dangrous_data %&gt;%
  group_by(level,vic_age_group) %&gt;% 
  dplyr::summarize(
    n_obs=n(),
    type=level_lm
  ) %&gt;% 
  unique() %&gt;%
  filter(type==2)

plot_pie_age2=plot_ly(plot_pie_age2,labels =~ vic_age_group,values= ~n_obs) %&gt;% 
  add_pie %&gt;% 
  layout(title=&quot;FELONY for vic_age&quot;)

plot_pie_age0</code></pre>
<div id="htmlwidget-c5a7e121f778ad50e316" style="width:80%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-c5a7e121f778ad50e316">{"x":{"visdat":{"2840bdb4bd9":["function () ","plotlyVisDat"]},"cur_data":"2840bdb4bd9","attrs":{"2840bdb4bd9":{"labels":{},"values":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"VIOLATION for vic_age","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["<18","18-24","25-44","45-64","65+"],"values":[22833,47981,211098,132348,27825],"type":"pie","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>plot_pie_age1</code></pre>
<div id="htmlwidget-079598cdc7beb6f6ac33" style="width:80%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-079598cdc7beb6f6ac33">{"x":{"visdat":{"28406a5099a3":["function () ","plotlyVisDat"]},"cur_data":"28406a5099a3","attrs":{"28406a5099a3":{"labels":{},"values":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"MISDEMEANOR for vic_age","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["<18","18-24","25-44","45-64","65+"],"values":[60163,138417,513187,264282,48800],"type":"pie","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>plot_pie_age2</code></pre>
<div id="htmlwidget-984c30df02540c253880" style="width:80%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-984c30df02540c253880">{"x":{"visdat":{"28405196d2dc":["function () ","plotlyVisDat"]},"cur_data":"28405196d2dc","attrs":{"28405196d2dc":{"labels":{},"values":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"FELONY for vic_age","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["<18","18-24","25-44","45-64","65+"],"values":[31668,93409,333316,170719,54196],"type":"pie","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>dangrous_data = dangrous_data%&gt;% 
  mutate(
   level_lm= case_when(
     level == &#39;VIOLATION&#39; ~ 0,
     level == &quot;MISDEMEANOR&quot; ~ 0,
     level == &quot;FELONY&quot; ~ 1
   )
  ) %&gt;% 
  mutate(
    level_lm=ordered(level_lm, labels = c(&#39;0&#39;, &#39;1&#39;))
    )
model_viage &lt;- glm(level_lm ~ vic_age_group ,family=binomial, data = dangrous_data)
summary(model_viage)</code></pre>
<pre><code>## 
## Call:
## glm(formula = level_lm ~ vic_age_group, family = binomial, data = dangrous_data)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -1.0343  -0.8701  -0.8461   1.4813   1.6042  
## 
## Coefficients:
##                     Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)        -0.963486   0.006605 -145.87   &lt;2e-16 ***
## vic_age_group18-24  0.272589   0.007726   35.28   &lt;2e-16 ***
## vic_age_group25-44  0.187392   0.006929   27.05   &lt;2e-16 ***
## vic_age_group45-64  0.120501   0.007211   16.71   &lt;2e-16 ***
## vic_age_group65+    0.617169   0.008668   71.20   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 2688603  on 2150241  degrees of freedom
## Residual deviance: 2681177  on 2150237  degrees of freedom
## AIC: 2681187
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<p>The results show that although the victim group is mainly targeted at
25-44. With the level of dangerous increase, the 45-64 victim age group
dropped about 4 percentage points and the 18-24 victim age group rose
about 3 points. From the logistics regression, vic_age_group is useful
for predicting the level of dangerous.</p>
</div>
<div id="victims-race-and-the-level-of-danger" class="section level2">
<h2>Victim’s race and the level of danger</h2>
<pre class="r"><code>dangrous_data = dangrous_data%&gt;% 
  mutate(
   level_lm= case_when(
     level == &#39;VIOLATION&#39; ~ 0,
     level == &quot;MISDEMEANOR&quot; ~ 1,
     level == &quot;FELONY&quot; ~ 2
   )
  )

dnd=dangrous_data %&gt;% 
  group_by(level,vic_race) %&gt;% 
  dplyr::summarize(
    n_obs=n(),
    type=level
  ) %&gt;% 
  unique() %&gt;% 
  ggplot(
    aes(x=level,y=n_obs,fill=vic_race)
  )+
  geom_bar(stat=&quot;identity&quot;)+
  labs(
    title=&quot;relationship between dangerous and victim race&quot;,
    x=&quot;dangerous level&quot;,
    y=&quot;number of cases&quot;
  )

plot_his_race=dangrous_data %&gt;% 
  group_by(level,vic_race) %&gt;% 
  dplyr::summarize(
    n_obs=n(),
    type=level_lm
  ) %&gt;% 
  unique() %&gt;% 
  ggplot(
    aes(x=level,y=n_obs,fill=vic_race)
  )+
  geom_bar(stat=&quot;identity&quot;)
plot_his_race</code></pre>
<p><img src="Analysis_Victim_files/figure-html/unnamed-chunk-6-1.png" width="80%" /></p>
<pre class="r"><code>plot_pie_race0=dangrous_data %&gt;%
  group_by(level,vic_race) %&gt;% 
  dplyr::summarize(
    n_obs=n(),
    type=level_lm
  ) %&gt;% 
  unique() %&gt;%
  filter(type==0)

plot_pie_race0=plot_ly(plot_pie_race0,labels =~ vic_race,values= ~n_obs) %&gt;% 
  add_pie %&gt;% 
  layout(title=&quot;VIOLATION for vic_race&quot;)

plot_pie_race1=dangrous_data %&gt;%
  group_by(level,vic_race) %&gt;% 
  dplyr::summarize(
    n_obs=n(),
    type=level_lm
  ) %&gt;% 
  unique() %&gt;%
  filter(type==1)

plot_pie_race1=plot_ly(plot_pie_race1,labels =~ vic_race,values= ~n_obs) %&gt;% 
  add_pie %&gt;% 
  layout(title=&quot;MISDEMEANOR for vic_race&quot;)

plot_pie_race2=dangrous_data %&gt;%
  group_by(level,vic_race) %&gt;% 
  dplyr::summarize(
    n_obs=n(),
    type=level_lm
  ) %&gt;% 
  unique() %&gt;%
  filter(type==2)

plot_pie_race2=plot_ly(plot_pie_race2,labels =~ vic_race,values= ~n_obs) %&gt;% 
  add_pie %&gt;% 
  layout(title=&quot;FELONY for vic_age&quot;)

plot_pie_race0</code></pre>
<div id="htmlwidget-0ec158c1c94092a3bb35" style="width:80%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-0ec158c1c94092a3bb35">{"x":{"visdat":{"2840965c132":["function () ","plotlyVisDat"]},"cur_data":"2840965c132","attrs":{"2840965c132":{"labels":{},"values":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"VIOLATION for vic_race","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["AMERICAN INDIAN/ALASKAN NATIVE","ASIAN / PACIFIC ISLANDER","BLACK","BLACK HISPANIC","WHITE","WHITE HISPANIC"],"values":[3058,38004,177269,24306,90599,108849],"type":"pie","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>plot_pie_race1</code></pre>
<div id="htmlwidget-3b1e64792b321ceeb251" style="width:80%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-3b1e64792b321ceeb251">{"x":{"visdat":{"2840776ebe6f":["function () ","plotlyVisDat"]},"cur_data":"2840776ebe6f","attrs":{"2840776ebe6f":{"labels":{},"values":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"MISDEMEANOR for vic_race","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["AMERICAN INDIAN/ALASKAN NATIVE","ASIAN / PACIFIC ISLANDER","BLACK","BLACK HISPANIC","WHITE","WHITE HISPANIC"],"values":[6920,104088,373581,59931,220892,259437],"type":"pie","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>plot_pie_race2</code></pre>
<div id="htmlwidget-d0eee4265840cd685394" style="width:80%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d0eee4265840cd685394">{"x":{"visdat":{"2840798a6ab":["function () ","plotlyVisDat"]},"cur_data":"2840798a6ab","attrs":{"2840798a6ab":{"labels":{},"values":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"FELONY for vic_age","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["AMERICAN INDIAN/ALASKAN NATIVE","ASIAN / PACIFIC ISLANDER","BLACK","BLACK HISPANIC","WHITE","WHITE HISPANIC"],"values":[4040,84157,224360,38198,168092,164461],"type":"pie","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>dangrous_data_3 = dangrous_data%&gt;% 
  mutate(
   level_lm= case_when(
     level == &#39;VIOLATION&#39; ~ 0,
     level == &quot;MISDEMEANOR&quot; ~ 0,
     level == &quot;FELONY&quot; ~ 1
   )
  )  %&gt;% 
  mutate(
    level_lm=ordered(level_lm, labels = c(&#39;0&#39;, &#39;1&#39;))
    )
model_vicrace &lt;- glm(level_lm ~ vic_race, family = binomial, data = dangrous_data_3)
summary(model_vicrace)</code></pre>
<pre><code>## 
## Call:
## glm(formula = level_lm ~ vic_race, family = binomial, data = dangrous_data_3)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -0.9645  -0.8648  -0.8266   1.4480   1.5774  
## 
## Coefficients:
##                                   Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)                      -0.904138   0.018648 -48.485  &lt; 2e-16 ***
## vic_raceASIAN / PACIFIC ISLANDER  0.380347   0.019149  19.863  &lt; 2e-16 ***
## vic_raceBLACK                     0.005927   0.018815   0.315    0.753    
## vic_raceBLACK HISPANIC            0.113287   0.019642   5.768 8.04e-09 ***
## vic_raceWHITE                     0.287279   0.018892  15.206  &lt; 2e-16 ***
## vic_raceWHITE HISPANIC            0.097952   0.018882   5.187 2.13e-07 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 2688603  on 2150241  degrees of freedom
## Residual deviance: 2680089  on 2150236  degrees of freedom
## AIC: 2680101
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<p>The relationship between victim race and case level. The black race
occupies the majority of the victims, and as the severity of the case
increases, the proportion of black victims decreases significantly,
while the proportion of white Hispanic and ASIAN/PACIFIC ISLAND victims
gradually increases. This can be confirmed by observing the size
relationship of the logistic regression coefficient.</p>
</div>
<div id="we-conclude-with-the-multi-logistics-regression-model."
class="section level2">
<h2>We conclude with the multi logistics regression model.</h2>
<pre class="r"><code>dangerous=dangrous_data%&gt;%
  mutate(
   level_lm= case_when(
     level == &#39;VIOLATION&#39; ~ 0,
     level == &quot;MISDEMEANOR&quot; ~ 0,
     level == &quot;FELONY&quot; ~ 1
   ) )%&gt;% 
  mutate(
    level_lm=ordered(level_lm, labels = c(&#39;1&#39;, &#39;0&#39;)
    ))

model_toal&lt;- glm(level_lm ~ vic_race + vic_age_group + vic_sex,family = binomial,data=dangerous)    


summary(model_toal)</code></pre>
<pre><code>## 
## Call:
## glm(formula = level_lm ~ vic_race + vic_age_group + vic_sex, 
##     family = binomial, data = dangerous)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -1.1743  -0.8920  -0.8069   1.4088   1.7489  
## 
## Coefficients:
##                                   Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)                      -1.285175   0.019951 -64.416  &lt; 2e-16 ***
## vic_raceASIAN / PACIFIC ISLANDER  0.406474   0.019215  21.154  &lt; 2e-16 ***
## vic_raceBLACK                     0.090817   0.018896   4.806 1.54e-06 ***
## vic_raceBLACK HISPANIC            0.173991   0.019718   8.824  &lt; 2e-16 ***
## vic_raceWHITE                     0.318597   0.018967  16.797  &lt; 2e-16 ***
## vic_raceWHITE HISPANIC            0.169170   0.018958   8.923  &lt; 2e-16 ***
## vic_age_group18-24                0.269861   0.007765  34.753  &lt; 2e-16 ***
## vic_age_group25-44                0.161043   0.006969  23.107  &lt; 2e-16 ***
## vic_age_group45-64                0.064622   0.007267   8.893  &lt; 2e-16 ***
## vic_age_group65+                  0.554430   0.008764  63.260  &lt; 2e-16 ***
## vic_sexM                          0.317009   0.002978 106.452  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 2688603  on 2150241  degrees of freedom
## Residual deviance: 2662120  on 2150231  degrees of freedom
## AIC: 2662142
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<pre class="r"><code>dangerous=dangerous%&gt;% 
  filter(!vic_age_group==&quot;18-24&quot;)
model_toal&lt;- glm(level_lm ~ vic_race + vic_age_group + vic_sex,family = binomial,data=dangerous)
summary(model_toal)</code></pre>
<pre><code>## 
## Call:
## glm(formula = level_lm ~ vic_race + vic_age_group + vic_sex, 
##     family = binomial, data = dangerous)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -1.1727  -0.8856  -0.7812   1.4145   1.7513  
## 
## Coefficients:
##                                   Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)                      -1.290558   0.021449 -60.167  &lt; 2e-16 ***
## vic_raceASIAN / PACIFIC ISLANDER  0.426588   0.020826  20.483  &lt; 2e-16 ***
## vic_raceBLACK                     0.098816   0.020486   4.824 1.41e-06 ***
## vic_raceBLACK HISPANIC            0.190652   0.021391   8.913  &lt; 2e-16 ***
## vic_raceWHITE                     0.331657   0.020551  16.138  &lt; 2e-16 ***
## vic_raceWHITE HISPANIC            0.192576   0.020557   9.368  &lt; 2e-16 ***
## vic_age_group25-44                0.161209   0.006969  23.131  &lt; 2e-16 ***
## vic_age_group45-64                0.066802   0.007269   9.190  &lt; 2e-16 ***
## vic_age_group65+                  0.556062   0.008770  63.405  &lt; 2e-16 ***
## vic_sexM                          0.296801   0.003194  92.919  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 2331828  on 1870434  degrees of freedom
## Residual deviance: 2309294  on 1870425  degrees of freedom
## AIC: 2309314
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<p>We finally presented the model in the form of multiple logistic
regression, but it should be noted that the information of the victim
alone cannot fit the data well, and the regression only shows the
correlation between the danger level and the characteristics of the
victim.</p>
</div>
</div>
<div
id="for-future-research-we-can-deeply-analyze-the-relationship-between-the-specific-event-content-and-the-victim-for-each-type-of-danger-level."
class="section level1">
<h1>For future research, we can deeply analyze the relationship between
the specific event content and the victim for each type of danger
level.</h1>
<div
id="at-present-for-the-example-of-a-misdemeanor-we-can-use-a-pie-chart-to-observe-its-event-composition."
class="section level2">
<h2>At present, for the example of a misdemeanor, we can use a pie chart
to observe its event composition.</h2>
<pre class="r"><code>pie_chart=dangrous_data %&gt;% 
  filter(level==&quot;MISDEMEANOR&quot;)
pie_chart =pie_chart%&gt;% 
  group_by(offense) %&gt;% 
  dplyr::summarize(n=n()) %&gt;% 
  mutate(
    offense=as.character(offense)
  )

pie_chart= rbind(pie_chart,c(&quot;others&quot;,290))
pie_chart=pie_chart %&gt;% 
  mutate(
    n=as.numeric(n)
    ) %&gt;% 
  filter(n&gt;100)

# mid victem event as offense details
plot_ly(pie_chart,labels =~ offense,values= ~n) %&gt;% 
  add_pie %&gt;% 
  layout(title=&quot;Constituent Incidents of MISDEMEANOR&quot;)</code></pre>
<div id="htmlwidget-ed5ffc78a07ed03cc02b" style="width:80%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ed5ffc78a07ed03cc02b">{"x":{"visdat":{"28404a5a8e73":["function () ","plotlyVisDat"]},"cur_data":"28404a5a8e73","attrs":{"28404a5a8e73":{"labels":{},"values":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Constituent Incidents of MISDEMEANOR","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["ADMINISTRATIVE CODE","ASSAULT 3 & RELATED OFFENSES","BURGLAR'S TOOLS","CRIMINAL MISCHIEF & RELATED OF","CRIMINAL TRESPASS","DANGEROUS DRUGS","DANGEROUS WEAPONS","FRAUDS","FRAUDULENT ACCOSTING","INTOXICATED & IMPAIRED DRIVING","OFF. AGNST PUB ORD SENSBLTY &","OFFENSES AGAINST PUBLIC ADMINI","OFFENSES AGAINST THE PERSON","OFFENSES INVOLVING FRAUD","OTHER OFFENSES RELATED TO THEF","OTHER STATE LAWS (NON PENAL LA","PETIT LARCENY","PETIT LARCENY OF MOTOR VEHICLE","POSSESSION OF STOLEN PROPERTY","SEX CRIMES","UNAUTHORIZED USE OF A VEHICLE","VEHICLE AND TRAFFIC LAWS","others"],"values":[5170,322026,264,135523,7823,311,1951,9992,474,2080,115367,29624,2994,280,3919,510,309693,640,1635,29551,5852,38852,290],"type":"pie","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="look-difference-among-most-common-event"
class="section level2">
<h2>Look difference among most common event</h2>
<pre class="r"><code>offense_data= dangrous_data %&gt;% 
  filter(offense==&quot;ASSAULT 3 &amp; RELATED OFFENSES&quot;|
           offense==&quot;OFF. AGNST PUB ORD SENSBLTY &amp;&quot;|  
           offense==&quot;CRIMINAL MISCHIEF &amp; RELATED OF&quot;|
           offense==    &quot;PETIT LARCENY&quot;|offense==&quot;OFFENSES AGAINST PUBLIC ADMINI&quot; | 
           offense==    &quot;SEX CRIMES&quot;) %&gt;% 
  filter(level==&quot;MISDEMEANOR&quot;)

dnd=offense_data %&gt;% 
  group_by(offense,vic_sex) %&gt;% 
  dplyr::summarize(
    n_obs=n(),
    type=level
  ) %&gt;% 
  unique() %&gt;% 
  ggplot(
    aes(x=offense,y=n_obs,fill=vic_sex)
  )+
  geom_bar(stat=&quot;identity&quot;)+
  theme(
    axis.text.x.bottom = element_text(angle=45, hjust=1)
  )+
  labs(
    title=&quot;MISDEMEANOR Incidents VS victim sex &quot;,
    x=&quot;dangerous level&quot;,
    y=&quot;number of cases&quot;
  )
dnd</code></pre>
<p><img src="Analysis_Victim_files/figure-html/unnamed-chunk-9-1.png" width="80%" /></p>
<p>By observing the important event composition of misdemeanors and the
differences in the characteristics of different victims, we can study
the relationship between victim characteristics and danger in more
detail. For example, by observing the event of OFF, AGNSTPUB ORD
SENSBLTY, we can see that it has a strong gender tendency.</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
